<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link type="text/css" rel="stylesheet"
	href="awesome/css/font-awesome.css" />
<link type="text/css" rel="stylesheet" href="css/login.css" />
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">
	$(function() {
		/**document.oncontextmenu = function() {
			return false;
		};**/
		$(document).keydown(function(e) {
			if (e.keyCode == 13) {
				$('#submit').click();
			}
		});
		var loginfrm = $('#loginfrm');
		loginfrm.find('input').focus(function(){
			$(this).addClass('logininput-focus');
			$(this).siblings('i').addClass('loginlabel-focus');
		}).blur(function(){
			$(this).removeClass('logininput-focus');
			$(this).siblings('i').removeClass('loginlabel-focus');
		});
		$('#submit', loginfrm).click(function() {
			var un = $("#username", loginfrm);
			var ps = $("#password", loginfrm);
			var vc = $("#vcinput", loginfrm);
			var go = $("#go", loginfrm);
			if(!un.val()){
				un.addClass('logininput-focus');
				$('#error').html('请输入用户名!');
				return;
			}
			if(!ps.val()){
				ps.addClass('logininput-focus');
				$('#error').html('请输入密码!');
				return;
			}
			if(!vc.val()){
				vc.addClass('logininput-focus');
				$('#error').html('请输入验证码!');
				return;
			}
			var data = {
				username : un.val(),
				password : ps.val(),
				vc : vc.val(),
				go : go.val()
			};
			var submiting = $('.loginsubmiting').show();
			$.ajax({
				url : 'login',
				type : 'post',
				data : data,
				dataType : 'json',
				success : function(result) {
					if (result.result) {
						document.location = './';
						//document.location = result.msg;
					} else {
						$('#error').html(result.msg);
						submiting.hide();
					}
				},
				error : function(response, b, c) {
					$('#error').html(response.responseText);
					submiting.hide();
				}
			});
		});
	});
</script>
</head>
<body>
	<div class="loginwrap">
		<h3 id='logo'></h3>
		<form id='loginfrm'>
			<p class="form-item">
				<i class='loginlabel icon-user'></i> <input type="text" id="username"
					name='name' type="text" placeholder="用户名" value="test"
					autocomplete="off" class='logininput'/>
			</p>
			<p class="form-item">
				<i class='loginlabel icon-lock'></i> <input type="password" id="password"
					name='password' type="password" placeholder="密码" value="111111" class='logininput'/>
			</p>
			<p class="form-item">
				<span class="loginsubmit fr">
					<a id="submit">登&nbsp;录 </a>
					<span class="loginsubmiting">登录中...</span>
				</span>
				<span class="fl">
					<input id="vcinput" name='vc' type="text" placeholder="验证码" class='logininput'/> <img
						src="captcha" id="VerifyImage" title="看不清？点击换一个"
						onclick="javascript:document.getElementById('VerifyImage').src='captcha?_r=' + new Date().getTime();return false;" />
				</span>
				<div class="clear"></div>
			</p>
			<div id="error"></div>
		</form>
	</div>
</body>
</html>