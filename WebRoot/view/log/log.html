<table>
	<tr>
		<td>操作员</td>
		<td><input type='text' id='ddddd' name='operator'/></td>
		<td>操作时间</td>
		<td><input class="Wdate" type="text" id="time1" name='time1' onFocus="WdatePicker({readOnly:true})"/></td>
		<td>~</td>
		<td><input class="Wdate" type="text" id="time2" name='time2' onFocus="WdatePicker({readOnly:true})"/></td>
		<td>
			<a class='btn btn-primary'>查询</a>
		</td>
	</tr>
</table>
<div id='kkk'></div>
<script type="text/javascript">
  $(function(){
	 $('#ddddd').AutoComplete2({
	 	url:'log/users',
	 	emptyText:''
	 }); 
	 
     $('#kkk').table({
		title:'日志列表',
		columns:[
			//{header:"ID",field:"id",width:50,align:'center'},
			{header:"操作员",field:"operator",width:'10%'},
			{header:"时间",field:"time",align:'center',width:180},
			{header:"IP",field:"ip",align:'center',width:150},
			{header:"操作",field:"op",width:120},
			//{header:"接口",field:"method",width:200},
			{header:"备注",field:"memo"}
		],
		url:'log/list',
		//selector:'m',
		condition:condition
	});
     $('.btn-default').click(function(){
    	 $('#kkk').table('reload');
     });
     $('.btn-success').click(function(){
    	 $.dialog({
    		 title:'查看日志',
    		 width:1000,
    		 height:450,
    		 url:'log/view'
    	 });
     });
     
     function condition(){
    	 var operator = $('input[name=operator]').val();
    	 var operator_text = $('input[name=operator_text]').val();
    	 var time1 = $('input[name=time1]').val();
    	 var time2 = $('input[name=time2]').val();
    	 var params = {operator: operator, operator_text: operator_text, time1: time1, time2: time2};
    	 return params;
     }
  });  
</script>