<p>接口说明:根据条件查询用户列表</p>
<p>请求方法:GET</p>
<p>请求url:user/list</p>
<p>参数列表:</p>
<a id='updatedbtn' class='btn btn-primary'><i class="icon-save"></i> 保存</a>
<a id='appendbtn' class='btn btn-primary'><i class="icon-plus"></i> 增加参数</a>
<div id='kkk'></div>

<script type="text/javascript">
	$('#kkk').table({
		columns : [
		//{header:"ID",field:"id",width:50,align:'center'},
		{
			header : "参数名",
			field : "pname",
			align : 'left',
			tip : true,
			editor : {
				type : 'text'
			}
		}, {
			header : "必填(Y/N)",
			field : "required",
			align : 'center',
			width : 100,
			render : requiredRender,
			editor : {
				type : 'selectbox',
				option : {
					ds : [{text:'Y', value:1}, {text:'N', value:0}]
				}
			}
		}, {
			header : "备注",
			field : "memo",
			align : 'left',
			width : 180,
			editor : {
				type : 'text'
			}
		}],
		pager : false,
		condition : condition,
		url : 'api/params'
	});
	function condition() {
		var params = {
			apiid : '1'
		};
		return params;
	}
	$('#updatedbtn').click(function(){
		$('#kkk').table('endEdit');
		var mm = $('#kkk').table('getChanged');
		var text = JSON.stringify(mm);
		$.ajax({
			url : 'api/changed',
			type : 'post',
			data : {apiid: '1', changed: text},
			contentType: "application/x-www-form-urlencoded; charset=utf-8",
			dataType : 'json',
			success : function(result) {
				if (result.result) {
					$.pop(result.msg, function() {
						$('#kkk').table('refresh');
					});
				}
			}
		});
	});
	$('#appendbtn').click(function(){
		$('#kkk').table('addRow', 0, {apiid:1});
	});
	function requiredRender(v, r) {
		return v==1 ? 'Y' : 'N';
	}
</script>