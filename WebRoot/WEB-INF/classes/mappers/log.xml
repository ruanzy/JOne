<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/2002/xmlspec/dtd/2.10/xmlspec.dtd">
<sqls>
	<sql id='count'>
		select count(*)
		from log l
		left join resources r
		on l.method=r.method
		<where>
			<if test="operator != null and operator != ''">
				and operator=#{operator_text}
			</if>
			<if test="time1 != null and time1 != ''">
				and time>=#{time1}
			</if>
			<if test="time2 != null and time2 != ''">
				<![CDATA[and time<=#{time2}]]>
			</if>
		</where>
	</sql>
	<sql id='selectAll'>
		select l.*,r.name as methodname
		from log l
		left join resources r
		on l.method=r.method
		<where>
			<if test="operator != null and operator != ''">
				and operator=#{operator_text}
			</if>
			<if test="time1 != null and time1 != ''">
				and time>=#{time1}
			</if>
			<if test="time2 != null and time2 != ''">
				<![CDATA[and time<=#{time2}]]>
			</if>
		</where>
		order by id desc
	</sql>
</sqls>